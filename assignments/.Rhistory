cocktail <- read_tsv("https://raw.githubusercontent.com/nthun/cocktail-balance/master/cocktail_data.tsv")
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
cocktail <- read_tsv("https://raw.githubusercontent.com/nthun/cocktail-balance/master/cocktail_data.tsv")
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
cocktail <- read_tsv("https://raw.githubusercontent.com/nthun/cocktail-balance/master/cocktail_data.tsv")
View(cocktail)
cocktail_cleaned <- cocktail
separate_rows(ingredients, sep = "<br/>")
cocktail_cleaned <- cocktail %>%
separate_rows(ingredients, sep = "<br/>")
View(cocktail_cleaned)
cocktail_cleaned <- cocktail %>%
separate_rows(ingredients, sep = "<br/>") %>%
str_remove_all("(%)")
cocktail_cleaned <- cocktail %>%
separate_rows(ingredients, sep = "<br/>") %>%
cocktail_cleaned <- cocktail %>%
separate_rows(ingredients, sep = "<br/>") %>%
cocktail_cleaned <- cocktail %>%
separate_rows(ingredients, sep = "<br/>")
cocktail <- read_tsv("https://raw.githubusercontent.com/nthun/cocktail-balance/master/cocktail_data.tsv")
cocktail_cleaned <- cocktail %>%
separate_rows(ingredients, sep = "<br/>")
View(cocktail_cleaned)
cocktail_cleaned <- cocktail %>%
separate_rows(ingredients, sep = "<br/>") %>%
mutate(ingredients %>%
str_remove_all("\\d+\\s*/?\\d*\\s*(oz|drops|cl|ml|tsp|tbsp)") %>%
str_remove_all("\\([^)]*%.*?\\)") %>%
str_squish()
)
View(cocktail_cleaned)
cocktail_cleaned <- cocktail %>%
separate_rows(ingredients, sep = "<br/>") %>%
mutate(ingredients = ingredients %>%
str_remove_all("\\d+\\s*/?\\d*\\s*(oz|drops|cl|ml|tsp|tbsp)") %>%
str_remove_all("\\([^)]*%.*?\\)") %>%
str_squish()
)
cocktail_cleaned <- cocktail %>%
separate_rows(ingredients, sep = "<br/>") %>%
mutate(ingredients = ingredients %>%
str_remove_all("\\d+\\s*/?\\d*\\s*(oz|drops|cl|ml|tsp|tbsp)") %>%
str_remove_all("\\([^)]*%.*?\\)") %>%
str_remove_all("\\b\\d+\\b") %>%
str_squish()
)
cocktail_cleaned <- cocktail %>%
separate_rows(ingredients, sep = "<br/>") %>%
mutate(ingredients = ingredients %>%
str_remove_all("\\d+\\s*/?\\d*\\s*(oz|drops|cl|ml|tsp|tbsp)") %>%
str_remove_all("\\([^)]*%.*?\\)") %>%
str_remove_all("\\b\\d+\\b") %>%
str_remove_all("\\b\\d+\\.\\d+\\b") %>%
str_remove_all("[[:punct:]]") %>%
str_squish()
)
cocktail_cleaned <- cocktail %>%
separate_rows(ingredients, sep = "*<br/>*") %>%
mutate(ingredients = ingredients %>%
str_remove_all("\\d+\\s*/?\\d*\\s*(oz|drops|cl|ml|tsp|tbsp)") %>%
str_remove_all("\\([^)]*%.*?\\)") %>%
str_remove_all("\\b\\d+\\b") %>%
str_remove_all("\\b\\d+\\.\\d+\\b") %>%
str_remove_all("[[:punct:]]") %>%
str_squish()
)
cocktail_cleaned <- cocktail %>%
separate_rows(ingredients, sep = "<br/>") %>%
mutate(ingredients = ingredients %>%
str_remove_all("\\d+\\s*/?\\d*\\s*(oz|drops|cl|ml|tsp|tbsp)") %>%
str_remove_all("\\([^)]*%.*?\\)") %>%
str_remove_all("\\b\\d+\\b") %>%
str_remove_all("\\b\\d+\\.\\d+\\b") %>%
str_remove_all("[[:punct:]]") %>%
str_squish()
)
cocktail_cleaned <- cocktail %>%
separate_rows(ingredients, sep = "\\s*<br/?>\\s*") %>%
mutate(ingredients = ingredients %>%
str_remove_all("\\d+\\s*/?\\d*\\s*(oz|drops|cl|ml|tsp|tbsp)") %>%
str_remove_all("\\([^)]*%.*?\\)") %>%
str_remove_all("\\b\\d+\\b") %>%
str_remove_all("\\b\\d+\\.\\d+\\b") %>%
str_remove_all("[[:punct:]]") %>%
str_squish()
)
cocktail_cleaned <- cocktail %>%
mutate(ingredients = str_replace_all(ingredients, "<[^>]+>", "|")) %>%
separate_rows(ingredients, sep = "\\s*<br/?>\\s*") %>%
mutate(ingredients = ingredients %>%
str_remove_all("\\d+\\s*/?\\d*\\s*(oz|drops|cl|ml|tsp|tbsp)") %>%
str_remove_all("\\([^)]*%.*?\\)") %>%
str_remove_all("\\b\\d+\\b") %>%
str_remove_all("\\b\\d+\\.\\d+\\b") %>%
str_remove_all("[[:punct:]]") %>%
str_squish()
)
cocktail_cleaned <- cocktail %>%
mutate(ingredients = str_replace_all(ingredients, "<[^>]+>", "|")) %>%
separate_rows(ingredients, sep = "\\|") %>%
mutate(ingredients = ingredients %>%
str_remove_all("\\d+\\s*/?\\d*\\s*(oz|drops|cl|ml|tsp|tbsp)") %>%
str_remove_all("\\([^)]*%.*?\\)") %>%
str_remove_all("\\b\\d+\\b") %>%
str_remove_all("\\b\\d+\\.\\d+\\b") %>%
str_remove_all("[[:punct:]]") %>%
str_squish()
)
View(cocktail_cleaned)
cocktail_cleaned <- cocktail %>%
mutate(ingredients = str_replace_all(ingredients, "<[^>]+>", "|")) %>%
separate_rows(ingredients, sep = "\\|") %>%
mutate(ingredients = ingredients %>%
str_remove_all("\\d+\\s*/?\\d*\\s*(oz|drops|cl|ml|tsp|tbsp|bsp)") %>%
str_remove_all("\\([^)]*%.*?\\)") %>%
str_remove_all("\\b\\d+\\b") %>%
str_remove_all("\\b\\d+\\.\\d+\\b") %>%
str_remove_all("[[:punct:]]") %>%
str_squish()
)
cocktail_cleaned <- cocktail %>%
mutate(ingredients = str_replace_all(ingredients, "<[^>]+>", "|")) %>%
separate_rows(ingredients, sep = "\\|") %>%
mutate(ingredients = ingredients %>%
str_remove_all("\\d+\\s*/?\\d*\\s*(oz|drops|cl|ml|tsp|tbsp|bsp)") %>%
str_remove_all("\\([^)]*%.*?\\)") %>%
str_remove_all("\\b\\d+\\b") %>%
str_remove_all("\\b\\d+\\.\\d+\\b") %>%
str_remove_all("[[:punct:]]") %>%
str_squish() %>%
str_to_lower()
)
ingredients_list <- cocktail_cleaned %>%
summarize(ingredients)
View(ingredients_list)
ingredients_list <- cocktail_cleaned %>%
summarize(ingredients) %>%
distinct(ingredients)
ingredients_list <- cocktail_cleaned %>%
summarize(ingredients) %>%
distinct(ingredients) %>%
arrange(ingredients)
ingredients_list <- cocktail_cleaned %>%
summarize(ingredients) %>%
distinct(ingredients) %>%
arrange(ingredients)
print(ingredients_list)
ingredients_list <- cocktail_cleaned %>%
summarize(ingredients) %>%
distinct(ingredients) %>%
arrange(ingredients)
view(ingredients_list)
ingredients_list <- cocktail_cleaned %>%
distinct(ingredients) %>%
arrange(ingredients)
View(ingredients_list)
View(ingredients_list)
count(ingredients_list)
View(ingredients_list)
ingredients_n <- count(ingredients_list)
print(ingredients_n)
count(ingredients_list)
ingredients_n <- cocktail_cleaned %>%
group_by(ingredients) %>%
summarize(n_ingredients = n())
View(ingredients_n)
ingredients_n <- cocktail_cleaned %>%
group_by(ingredients) %>%
summarize(n_ingredients = n()) %>%
arrange(desc())
ingredients_n <- cocktail_cleaned %>%
group_by(ingredients) %>%
summarize(n_ingredients = n()) %>%
arrange(desc(n_ingredients))
View(ingredients_n)
ingredients_n <- cocktail_cleaned %>%
group_by(ingredients) %>%
summarize(n_ingredients = n()) %>%
arrange(desc(n_ingredients)) %>%
slice_max(n, n = 10, with_ties = TRUE)
ingredients_n <- cocktail_cleaned %>%
group_by(ingredients) %>%
summarize(n_ingredients = n()) %>%
arrange(desc(n_ingredients)) %>%
slice_max(n, n = 10, with_ties = TRUE)
ingredients_n <- cocktail_cleaned %>%
group_by(ingredients) %>%
summarize(n_ingredients = n()) %>%
arrange(desc(n_ingredients)) %>%
slice_max(n_ingredients, n = 10, with_ties = TRUE)
ingredients_10 <- cocktail_cleaned %>%
group_by(ingredients) %>%
summarize(n_ingredients = n()) %>%
arrange(desc(n_ingredients)) %>%
slice_max(n_ingredients, n = 10, with_ties = TRUE)
cocktail <- read_tsv("https://raw.githubusercontent.com/nthun/cocktail-balance/master/cocktail_data.tsv")
cocktail <- read_tsv("https://raw.githubusercontent.com/nthun/cocktail-balance/master/cocktail_data.tsv")
cocktail_cleaned <- cocktail %>%
mutate(ingredients = str_replace_all(ingredients, "<[^>]+>", "|")) %>%
separate_rows(ingredients, sep = "\\|") %>%
mutate(ingredients = ingredients %>%
str_remove_all("\\d+\\s*/?\\d*\\s*(oz|drops|cl|ml|tsp|tbsp|bsp)") %>%
str_remove_all("\\([^)]*%.*?\\)") %>%
str_remove_all("\\b\\d+\\b") %>%
str_remove_all("\\b\\d+\\.\\d+\\b") %>%
str_remove_all("[[:punct:]]") %>%
str_squish() %>%
str_to_lower()
)
ingredients_list <- cocktail_cleaned %>%
distinct(ingredients) %>%
arrange(ingredients)
count(ingredients_list)
ingredients_10 <- cocktail_cleaned %>%
group_by(ingredients) %>%
summarize(n_ingredients = n()) %>%
arrange(desc(n_ingredients)) %>%
slice_max(n_ingredients, n = 10, with_ties = TRUE)
cocktail_most_ingredients <- cocktail_cleaned %>%
group_by(name) %>%
summarize(n_ingredients = n())
View(cocktail_most_ingredients)
cocktail_ingredients <- cocktail_cleaned %>%
group_by(name) %>%
summarize(n_ingredients = n())
cocktail_ingredients <- cocktail_cleaned %>%
group_by(name) %>%
summarize(n_ingredients = n()) %>%
arrange(desc(n_ingredients))
View(cocktail_ingredients)
cocktail_ingredients <- cocktail_cleaned %>%
group_by(name) %>%
summarize(n_ingredients = n()) %>%
arrange(desc(n_ingredients))
cocktail_most_ingredients <- cocktail_ingredients %>%
filter(n_ingredients = 6)
cocktail_ingredients <- cocktail_cleaned %>%
group_by(name) %>%
summarize(n_ingredients = n()) %>%
arrange(desc(n_ingredients))
cocktail_most_ingredients <- cocktail_ingredients %>%
filter(n_ingredients == 6)
View(cocktail_most_ingredients)
rare_ingredients <- cocktail_cleaned %>%
group_by(ingredients) %>%
summarize(n_cocktails = n())
View(rare_ingredients)
rare_ingredients <- cocktail_cleaned %>%
group_by(ingredients, name) %>%
summarize(n_cocktails = n())
rare_ingredients <- cocktail_cleaned %>%
group_by(ingredients, name) %>%
summarize(n_cocktails = n(name))
rare_ingredients <- cocktail_cleaned %>%
group_by(ingredients, name) %>%
summarize(n_cocktails = n_distinct(name))
rare_ingredients <- cocktail_cleaned %>%
group_by(ingredients) %>%
summarize(n_cocktails = n_distinct(name))
rare_ingredients <- cocktail_cleaned %>%
group_by(ingredients) %>%
summarize(n_ingredients = n()) %>%
arrange(n_ingredients) %>%
filter(n_ingredients == 1)
list(rare_ingredients)
rare_ingredients_list <- list(rare_ingredients)
rare_ingredients %>%
pull(name)
rare_ingredients_list %>% cocktail_cleaned %>%
group_by(ingredients, name) %>%
summarize(n_ingredients = n()) %>%
arrange(n_ingredients) %>%
filter(n_ingredients == 1)
View(rare_ingredients_list)
rare_ingredients_list <- cocktail_cleaned %>%
group_by(ingredients, name) %>%
summarize(n_ingredients = n()) %>%
arrange(n_ingredients) %>%
filter(n_ingredients == 1)
View(rare_ingredients_list)
rare_ingredients_list <- cocktail_cleaned %>%
group_by(name) %>%
summarise(n_ingredients = n()) %>%
filter(n_ingredients == 1)
View(rare_ingredients_list)
rare_ingredients_list <- cocktail_cleaned %>%
group_by(name) %>%
summarise(ingredients = n()) %>%
filter(ingredients == 1)
View(cocktail_cleaned)
rare_ingredients_list <- cocktail_cleaned %>%
group_by(name) %>%
summarize(ingredients = n()) %>%
filter(ingredients == 1)
rare_ingredients_list <- cocktail_cleaned %>%
group_by(ingredients, name) %>%
summarize(n_ingredients = n()) %>%
arrange(n_ingredients) %>%
filter(n_ingredients == 1)
rare_ingredients_list <- cocktail_cleaned %>%
group_by(ingredients, name) %>%
summarize(n_ingredients = n_distinct(name))) %>%
rare_ingredients_list <- cocktail_cleaned %>%
group_by(ingredients, name) %>%
summarize(n_ingredients = distinct(name))) %>%
rare_ingredients_list <- cocktail_cleaned %>%
group_by(ingredients, name) %>%
summarize(n_ingredients = n(ingredients)) %>%
arrange(ingredients) %>%
filter(ingredients == 1)
rare_ingredients_list <- cocktail_cleaned %>%
group_by(ingredients, name)
View(rare_ingredients_list)
View(cocktail_cleaned)
rare_ingredients_list <- cocktail_cleaned %>%
group_by(name, ingredients)
rare_ingredients_list <- cocktail_cleaned %>%
group_by(name, ingredients) %>%
summarize(n_ingredients = n()) %>%
arrange(n_ingredients) %>%
filter(n_ingredients == 1)
ingredient_usage <- cocktail_cleaned %>%
group_by(ingredients) %>%
summarise(n_cocktails = n_distinct(name)) %>%
filter(n_cocktails == 1)
View(ingredient_usage)
View(rare_ingredients)
ingredient_usage <- cocktail_cleaned %>%
group_by(ingredients, name) %>%
summarise(n_cocktails = n_distinct(name)) %>%
filter(n() == 1)
View(ingredient_usage)
ingredient_usage <- cocktail_cleaned %>%
group_by(ingredients, name) %>%
summarise(n_cocktails = n_distinct(name)) %>%
filter(n() == 1) %>%
ungroup() %>%
select(name, ingredients)
ingredient_usage <- cocktail_cleaned %>%
group_by(ingredients, name) %>%
summarise(n_cocktails = n_distinct(name)) %>%
filter(n() == 1) %>%
ungroup() %>%
select(name)
common_ingredients <-
cocktail_cleaned %>%
group_by(ingredients, name) %>%
summarise(n_cocktails = n_distinct(name)) %>%
filter(n() != 1) %>%
ungroup() %>%
select(name)
View(common_ingredients)
common_ingredients <-
cocktail_cleaned %>%
group_by(ingredients, name) %>%
summarise(n_cocktails = n_distinct(name)) %>%
filter(n() != 1)
common_ingredients <-
cocktail_cleaned %>%
group_by(ingredients, name) %>%
summarise(n_cocktails = n_distinct(name)) %>%
filter(n() != 1) %>%
ungroup() %>%
select(name, ingredients)
common_ingredients <-
cocktail_cleaned %>%
group_by(ingredients, name) %>%
summarise(n_cocktails = n_distinct(name)) %>%
filter(n() != 1) %>%
ungroup() %>%
select(name)
cocktail_cheat_sheet <- cocktail_cleaned %>%
mutate(present = "X") %>%
pivot_wider(
names_from = ingredients,
values_from = present,
values_fill = ""
) %>%
relocate(name, sort(names(.)[-1]))
cocktail_cheat_sheet <- cocktail_cleaned %>%
distinct(name, ingredients)
mutate(present = "X") %>%
pivot_wider(
names_from = ingredients,
values_from = present,
values_fill = ""
) %>%
relocate(name, sort(names(.)[-1]))
cocktail_cheat_sheet <- cocktail_cleaned %>%
distinct(name, ingredients) %>%
mutate(present = "X") %>%
pivot_wider(
names_from = ingredients,
values_from = present,
values_fill = ""
) %>%
relocate(name, sort(names(.)[-1]))
View(cocktail_cheat_sheet)
cocktail_cheat_sheet <- cocktail_cleaned %>%
distinct(name, ingredients) %>%
mutate(present = "X") %>%
pivot_wider(
names_from = ingredients,
values_from = present,
values_fill = ""
) %>%
relocate(name, sort(names(.)[-1]))
cocktail_cheat_sheet
cocktail_matrix <- cocktail_cleaned %>%
distinct(name, ingredients)
cocktail <- cocktail_matrix$name
ingredient <- cocktail_matrix$ingredients
values <- rep("X", nrows(cocktail_matrix))
cocktail_matrix <- cocktail_cleaned %>%
distinct(name, ingredients)
cocktail <- cocktail_matrix$name
ingredient <- cocktail_matrix$ingredients
values <- rep("X", nrows(cocktail_matrix))
cocktail_matrix <- cocktail_cleaned %>%
distinct(name, ingredients)
cocktail <- cocktail_matrix$name
ingredient <- cocktail_matrix$ingredients
values <- rep("X", nrows(cocktail_matrix))
View(cocktail_cheat_sheet)
cocktail_matrix <- cocktail_cleaned %>%
distinct(name, ingredients)
cocktail <- cocktail_matrix$name
ingredient <- cocktail_matrix$ingredients
values <- rep("X", nrows(cocktail_matrix))
cocktail_matrix <- cocktail_cleaned %>%
distinct(name, ingredients)
cocktail <- cocktail_matrix$name
ingredient <- cocktail_matrix$ingredients
values <- rep("X", nrow(cocktail_matrix))
cocktail_cheat_sheet <- matrix("",
nrow = length(unique(cocktail)),
ncol = length(unique(ingredient)),
dimnames = list(sort(unique(cocktail)), sort(unique(ingredient)))
)
for (i in seq_len(nrow(cocktail_matrix))) {
cocktail_cheat_sheet[rows[i], cols[i]] <- "X"
}
cocktail_matrix <- cocktail_cleaned %>%
distinct(name, ingredients)
cocktail <- cocktail_matrix$name
ingredient <- cocktail_matrix$ingredients
values <- rep("X", nrow(cocktail_matrix))
cocktail_cheat_sheet <- matrix("",
nrow = length(unique(cocktail)),
ncol = length(unique(ingredient)),
dimnames = list(sort(unique(cocktail)), sort(unique(ingredient)))
)
for (i in seq_len(nrow(cocktail_matrix))) {
cocktail_cheat_sheet[cocktail[i], ingredient[i]] <- "X"
}
cocktail_cheat_sheet
View(cocktail_cheat_sheet)
cocktail_cleaned <- cocktail %>%
mutate(ingredients = str_replace_all(ingredients, "<[^>]+>", "|")) %>%
separate_rows(ingredients, sep = "\\|") %>%
mutate(ingredients = ingredients %>%
str_remove_all("\\d+\\s*/?\\d*\\s*(oz|drops|tsp|tbsp|bsp)") %>%
str_remove_all("\\([^)]*%.*?\\)") %>%
str_remove_all("\\b\\d+\\b") %>%
str_remove_all("\\b\\d+\\.\\d+\\b") %>%
str_remove_all("[[:punct:]]") %>%
str_squish() %>%
str_to_lower()
)
View(cocktail_cleaned)
